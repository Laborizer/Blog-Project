(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(t,e,a){},38:function(t,e,a){t.exports=a(85)},43:function(t,e,a){},85:function(t,e,a){"use strict";a.r(e);var n=a(1),i=a.n(n),o=a(4),r=a.n(o),l=(a(43),a(8)),s=a(9),c=a(11),d=a(10),u=a(12),m=a(6),h=(a(26),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).show=function(){a.setState({visible:!0})},a.hide=function(){a.setState({visible:!1,tags:[]})},a.postIt=function(){var t={title:a.titleTextField.current.value,author:a.authorTextField.current.value,content:a.contentTextField.current.value,creationDate:(new Date).getTime()},e={};fetch("./addBlogItem",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(t){return t.json()}).then(function(t){var n=a.props.data.slice();e=t,n.unshift(t),a.props.updateData(n),a.postTags(e)})},a.postTags=function(t){a.hide();for(var e=[],n=0;n<a.state.tags.length;n++){var i={};i.blogId=t.id,i.tagName=a.state.tags[n].tagName,e.push(i)}fetch("./addTags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(t){return t.json()}).then(function(t){for(var e=a.props.tagData.slice(),n=0;n<t.length;n++)e.push(t[n]);a.props.updateTagData(e),a.setState({tags:[]})})},a.addTag=function(){var t=a.state.tags.slice(),e={tagName:"#"+a.tagsTextField.current.value};t.push(e),a.setState({tags:t}),console.log("Added tag")},a.removeTag=function(t){for(var e=a.state.tags.slice(),n=0;n<e.length;n++)e[n].tagName===t.tagName&&e.splice(n,1);a.setState({tags:e})},a.titleTextField=i.a.createRef(),a.authorTextField=i.a.createRef(),a.contentTextField=i.a.createRef(),a.tagsTextField=i.a.createRef(),a.state={visible:!1,tags:[]},a}return Object(u.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this,e=[];e.push(i.a.createElement(m.b,{flat:!0,secondary:!0,swapTheming:!0,onClick:this.hide},"Cancel")),e.push(i.a.createElement(m.b,{flat:!0,primary:!0,swapTheming:!0,onClick:this.postIt},"Send"));var a=this.state.tags.map(function(e){return i.a.createElement(m.g,{key:e.id,label:e.tagName,removable:!0,onClick:function(){return t.removeTag(e)}})});return i.a.createElement("div",null,i.a.createElement(m.b,{className:"md-full-width",raised:!0,secondary:!0,onClick:this.show},"Create a New Post"),i.a.createElement(m.h,{id:"new-post",visible:this.state.visible,onHide:this.hide,actions:e,title:"Write a new Post",width:800,height:600},i.a.createElement(m.j,{id:"title",label:"Title",required:!0,ref:this.titleTextField}),i.a.createElement(m.j,{id:"author",label:"Author",required:!0,ref:this.authorTextField}),i.a.createElement(m.j,{id:"content",label:"Content",rows:5,required:!0,ref:this.contentTextField}),a,i.a.createElement(m.j,{className:"md-cell",id:"tagsField",label:"Tags",ref:this.tagsTextField}),i.a.createElement(m.b,{flat:!0,primary:!0,swapTheming:!0,className:"md-cell",onClick:this.addTag},"Add Tag")))}}]),e}(n.PureComponent)),p=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).like=function(){if(!a.state.isLiked){var t="/likeComment/"+a.props.id,e={id:a.props.id};fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(t){return t.json()}).then(function(t){a.setState({isLiked:!0});for(var e=a.props.commentData.slice(),n=0;n<e.length;n++)e[n].id===a.props.id&&(e[n].likes+=1);a.props.updateCommentData(e)})}},a.state={isLiked:!1},a}return Object(u.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(m.c,{style:{marginTop:5,marginBottom:5,maxWidth:320},classname:"comment"},i.a.createElement(m.f,{title:this.props.title,subtitle:"By: "+this.props.author}),i.a.createElement(m.e,null,i.a.createElement("p",null,this.props.content)),i.a.createElement(m.d,null,i.a.createElement(m.b,{style:{align:"left",marginRight:10},raised:!0,onClick:this.like},"Like"),i.a.createElement("p",null,"Likes: ",this.props.likes))))}}]),e}(n.PureComponent),g=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).show=function(){a.setState({visible:!0})},a.hide=function(){a.setState({visible:!1})},a.editIt=function(){var t={id:a.props.id,title:a.titleTextField.current.value,content:a.contentTextField.current.value};fetch("./editBlogItem",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(t){return t.json()}).then(function(t){for(var e=a.props.data.slice(),n=0;n<e.length;n++)e[n].id===a.props.id&&(e[n].title=t.title,e[n].content=t.content);a.props.updateData(e)})},a.editPostDialog=function(){var t=[];return t.push(i.a.createElement(m.b,{flat:!0,secondary:!0,swapTheming:!0,onClick:a.hide},"Cancel")),t.push(i.a.createElement(m.b,{flat:!0,primary:!0,swapTheming:!0,onClick:a.editIt},"Send")),i.a.createElement("div",null,i.a.createElement(m.h,{id:"edit-post",visible:a.state.visible,onHide:a.hide,actions:t,title:"Edit Post",width:600},i.a.createElement(m.j,{id:"title",label:"Title",required:!0,ref:a.titleTextField}),i.a.createElement(m.j,{id:"content",label:"Content",rows:5,required:!0,ref:a.contentTextField})))},a.comment=function(){var t={blogId:a.props.id,author:a.nicknameTextField.current.value,content:a.commentTextField.current.value};fetch("./addComment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(t){return t.json()}).then(function(t){var e=a.props.commentData.slice();e.unshift(t),a.props.updateCommentData(e)})},a.deletePost=function(){var t="./deleteBlogItem/"+a.props.id,e={id:a.props.id,title:a.props.title,author:a.props.author,content:a.props.content,creationDate:a.props.creationDate};fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(t){return t.json()});for(var n=a.props.data.slice(),i=0;i<n.length;i++)n[i].id===a.props.id&&n.splice(i,1);a.props.updateData(n)},a.makeDate=function(){var t=new Date(a.props.creationDate);return t.getDate()+"."+(t.getMonth()+1)+"."+t.getFullYear()},a.showComments=function(){return i.a.createElement("div",null,a.props.commentData.map(function(t){return a.props.id===t.blogId?i.a.createElement("div",{key:t.id},i.a.createElement(p,{id:t.id,blogId:t.blogId,commentDate:t.commentDate,author:t.author,content:t.content,likes:t.likes,commentData:a.props.commentData,updateCommentData:a.props.updateCommentData,updateCommentLikes:a.updateCommentLikes})):null}))},a.commentTextField=i.a.createRef(),a.nicknameTextField=i.a.createRef(),a.titleTextField=i.a.createRef(),a.contentTextField=i.a.createRef(),a.state={visible:!1},a}return Object(u.a)(e,t),Object(s.a)(e,[{key:"showTags",value:function(){var t=this,e="";return this.props.tagData.map(function(a){a.blogId===t.props.id&&(e=""===e?a.tagName:e+", "+a.tagName)}),i.a.createElement("p",null,e)}},{key:"render",value:function(){return i.a.createElement("div",{style:{margin:50}},this.editPostDialog(),i.a.createElement(m.c,{style:{marginTablet:50,minWidth:200,float:"middle"},className:"blogpost"},i.a.createElement(m.f,{title:this.props.title,subtitle:"By: "+this.props.author+", "+this.makeDate()}),i.a.createElement(m.e,null,i.a.createElement("p",null,this.props.content),i.a.createElement("p",null,"Tags: ",this.showTags())),i.a.createElement(m.d,{expander:!0}),i.a.createElement(m.e,{expandable:!0},i.a.createElement(m.j,{id:"postCommentField"+this.props.id,required:!0,label:"Comment",lineDirection:"center",className:"md-cell md-cell--bottom",ref:this.commentTextField}),i.a.createElement(m.j,{id:"commentAuthorField"+this.props.id,required:!0,label:"Nickname",lineDirection:"center",className:"md-cell md-cell--bottom",ref:this.nicknameTextField}),i.a.createElement(m.b,{raised:!0,onClick:this.comment},"Comment"),i.a.createElement(m.b,{raised:!0,onClick:this.deletePost},"Delete"),i.a.createElement(m.b,{raised:!0,onClick:this.show},"Edit"),this.showComments())))}}]),e}(n.PureComponent),f=function(t){function e(){return Object(l.a)(this,e),Object(c.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this.props.data.map(function(t){return t.title}),e=this.props.tagData.map(function(t){return t.tagName}),a=t.concat(e).filter(function(t,e,a){return a.indexOf(t)===e});return i.a.createElement("div",{className:"md-grid"},i.a.createElement(m.a,{id:"searchField",lineDirection:"center",placeholder:"Search",resize:{min:400,max:1e3},leftIcon:i.a.createElement(m.i,null,"search"),className:"md-cell md-cell--bottom ",data:a,filter:m.a.caseInsensitiveFilter,onAutocomplete:this.props.onAutocomplete,onChange:this.props.onChange}))}}]),e}(n.PureComponent),v=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(c.a)(this,Object(d.a)(e).call(this,t))).updateData=function(t){a.setState({loadingData:!0}),a.setState({data:t,loadingData:!1})},a.updateCommentData=function(t){a.setState({commentData:t})},a.updateTagData=function(t){a.setState({tagData:t}),console.log(a.state.tagData)},a.showData=function(t){return t.map(function(t){return i.a.createElement(g,{key:t.id,id:t.id,title:t.title,author:t.author,content:t.content,creationDate:t.creationDate,data:a.state.data,commentData:a.state.commentData,tagData:a.state.tagData,updateData:a.updateData,updateCommentData:a.updateCommentData,updateTagData:a.updateTagData})})},a.getPostsByTags=function(t){var e=[],n=!0,i=!1,o=void 0;try{for(var r,l=a.state.data[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var s=r.value;s.id===t.blogId&&e.push(s)}}catch(c){i=!0,o=c}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return e},a.onAutocomplete=function(t){var e=[],n=!0,i=!1,o=void 0;try{for(var r,l=a.state.tagData[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var s=r.value;if(s.tagName===t)for(var c=a.getPostsByTags(s),d=0;d<c.length;d++)e.push(c[d])}}catch(v){i=!0,o=v}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}var u=!0,m=!1,h=void 0;try{for(var p,g=a.state.data[Symbol.iterator]();!(u=(p=g.next()).done);u=!0){var f=p.value;f.title===t&&e.push(f)}}catch(v){m=!0,h=v}finally{try{u||null==g.return||g.return()}finally{if(m)throw h}}a.setState({searchResults:e,showSearch:!0})},a.onChange=function(t){""===t&&a.setState({searchResults:[],showSearch:!1})},a.state={data:[],commentData:[],searchResults:[],tagData:[],loadingData:!1,showSearch:!1},a}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.setState({loadingData:!0}),fetch("/getBlogItems").then(function(t){return t.json()}).then(function(e){return t.setState({data:e})}),fetch("/getAllComments").then(function(t){return t.json()}).then(function(e){return t.setState({commentData:e})}),fetch("/getAllTags").then(function(t){return t.json()}).then(function(e){return t.setState({tagData:e,loadingData:!1})})}},{key:"render",value:function(){var t={marginLeft:5,marginRight:5};return this.state.loadingData?i.a.createElement("div",{className:"BlogApp"},i.a.createElement(m.k,{colored:!0,title:"Blog-Pro"}),i.a.createElement("div",null,i.a.createElement("p",null,"Loading..."))):!this.state.loadingData&&this.state.showSearch?i.a.createElement("div",{className:"BlogApp"},i.a.createElement(m.k,{colored:!0,title:"Blog-Pro",children:i.a.createElement(f,{data:this.state.data,tagData:this.state.tagData,onAutocomplete:this.onAutocomplete,onChange:this.onChange})}),i.a.createElement(h,{data:this.state.data,tagData:this.state.tagData,updateData:this.updateData,updateTagData:this.updateTagData}),i.a.createElement("div",{style:t},this.showData(this.state.searchResults))):this.state.loadingData?void 0:i.a.createElement("div",{className:"BlogApp"},i.a.createElement(m.k,{colored:!0,title:"Blog-Pro",children:i.a.createElement(f,{data:this.state.data,tagData:this.state.tagData,onAutocomplete:this.onAutocomplete,onChange:this.onChange})}),i.a.createElement(h,{data:this.state.data,tagData:this.state.tagData,updateData:this.updateData,updateTagData:this.updateTagData}),i.a.createElement("div",{style:t},this.showData(this.state.data)))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(37);a.n(D).a.load({google:{families:["Roboto:300,400,500,700","Material Icons"]}}),r.a.render(i.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.4892bc2d.chunk.js.map